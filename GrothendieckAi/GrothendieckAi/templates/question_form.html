{% extends "base.html" %}

{% block title %}Math QA{% endblock %}

{% block content %}
<h1>Ask a Math Question</h1>

<form method="POST" class="question-form">
    {% csrf_token %}
    <textarea name="question" rows="3" placeholder="What is a K3 surface?">{{ question }}</textarea><br />
    <button type="submit">Ask</button>
</form>

{% if relevant_pages %}
    <h3>Relevant PDF Pages</h3>
    <ul class="pages-list">
        {% for page in relevant_pages %}
            <li><a href="#" onclick="jumpToPage({{ page }}); return false;">Page {{ page }}</a></li>
        {% endfor %}
    </ul>
{% endif %}

<h2>ðŸ“„ Source Document</h2>
<iframe
    src="{{ pdf_url }}"
    id="pdf-frame"
    width="100%"
    height="600px"
    style="border: 1px solid #ccc; border-radius: 8px;"
></iframe>

<script>
    const pdfUrl = "{{ pdf_url|escapejs }}";

    function jumpToPage(page) {
        const iframe = document.getElementById('pdf-frame');
        iframe.src = pdfUrl + "#page=" + page;
    }
</script>

{% endblock %}
